@tailwind base;
@tailwind components;
@tailwind utilities;

/* Fondo base y scroll suave para navegar */
html {
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%;
  overflow-x: hidden;
  max-width: 100vw;
}
html, body {
  background-color: #08080c;
  min-height: 100%;
  overflow-x: hidden;
  max-width: 100%;
  /* Safe area para muescas (iPhone X+) */
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}
#root {
  min-height: 100vh;
  min-height: 100dvh;
  background-color: #08080c;
  overflow-x: hidden;
  max-width: 100%;
  min-width: 0;
}
/* Reducir highlight de tap en móvil */
@media (hover: none) {
  * {
    -webkit-tap-highlight-color: transparent;
    tap-highlight-color: transparent;
  }
}

/* Chat: aparición suave de mensajes y puntos de “escribiendo” */
@keyframes chat-fade-in {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes chat-typing-dot {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
  30% { transform: translateY(-4px); opacity: 1; }
}
.chat-message-enter {
  animation: chat-fade-in 0.25s ease-out forwards;
}
.chat-typing-dots span {
  animation: chat-typing-dot 1.2s ease-in-out infinite;
}
.chat-typing-dots span:nth-child(2) { animation-delay: 0.15s; }
.chat-typing-dots span:nth-child(3) { animation-delay: 0.3s; }

@layer base {
  body {
    @apply bg-onix-bg text-zinc-100 font-sans antialiased min-h-screen;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  /* Imágenes no desbordan en móvil */
  img {
    max-width: 100%;
  }
  /* Focus visible para accesibilidad */
  :focus-visible {
    @apply outline-none ring-2 ring-onix-accent ring-offset-2 ring-offset-onix-bg;
  }
}

@layer components {
  /* Inputs consistentes */
  .input-base {
    @apply w-full min-h-[44px] text-base bg-onix-bg/80 border border-onix-border rounded-xl px-4 py-3.5 text-white placeholder-onix-muted
           focus:outline-none focus:border-onix-accent focus:ring-2 focus:ring-onix-accent/20
           transition-all duration-200;
  }
  .input-base:hover:not(:focus) {
    @apply border-onix-border-light;
  }
  /* Botón primario (touch target ≥44px para móvil) */
  .btn-primary {
    @apply inline-flex items-center justify-center font-semibold text-white rounded-xl min-h-[44px] min-w-[44px]
           bg-gradient-to-r from-onix-accent to-onix-accentDim
           hover:from-onix-accentHover hover:to-onix-accentDim
           focus:outline-none focus:ring-2 focus:ring-onix-accent focus:ring-offset-2 focus:ring-offset-onix-bg
           shadow-[0_0_24px_-6px_rgba(224,69,197,0.4)]
           hover:shadow-[0_0_32px_-8px_rgba(224,69,197,0.5)]
           active:scale-[0.98]
           transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100;
  }
  /* Card elevada */
  .card-elevated {
    @apply bg-onix-card border border-onix-border rounded-3xl shadow-card
           bg-gradient-to-b from-white/[0.02] to-transparent;
  }
  .card-elevated:hover {
    @apply shadow-card-hover border-onix-border-light;
  }
  /* Texto siempre visible sobre fondos variables: sombra oscura para contraste */
  .text-visible {
    text-shadow:
      0 0 2px rgba(0,0,0,1),
      0 0 4px rgba(0,0,0,0.95),
      0 1px 2px rgba(0,0,0,1),
      0 1px 4px rgba(0,0,0,0.9),
      0 2px 4px rgba(0,0,0,0.8);
  }
  .text-visible-strong {
    text-shadow:
      0 0 3px rgba(0,0,0,1),
      0 0 6px rgba(0,0,0,1),
      0 1px 3px rgba(0,0,0,1),
      0 2px 6px rgba(0,0,0,0.95),
      0 2px 8px rgba(0,0,0,0.9);
  }
}

/* Scrollbar sutil */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { @apply bg-onix-bg; }
::-webkit-scrollbar-thumb { @apply bg-onix-border rounded-full; }
::-webkit-scrollbar-thumb:hover { @apply bg-onix-muted; }

/* Suavizado de transiciones globales */
* {
  @apply border-onix-border;
}
